<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Whaaat!? Festival 2024</title>
    <link rel="stylesheet" href="https://use.typekit.net/kax8djx.css">
    <link rel="stylesheet" href="mobile.css">
</head>
<body>
    <section id="top">
        <div class="tv-container">
            <img src="/tvimagelayers/tv-new.png" alt="TV Frame" class="tv-frame">
            <video class="tv-video" autoplay muted loop playsinline>
                <source src="/channelvideo/staticonly.m4v" type="video/mp4">
                Your browser does not support the video tag.
            </video>
        </div>
        <div class="button-container">
            <button id="btn1" class="btn" data-channel="1">1</button>
            <button id="btn2" class="btn" data-channel="2">2</button>
            <button id="btn3" class="btn" data-channel="3">3</button>
            <button id="btn4" class="btn" data-channel="4">4</button>
            <button id="btn5" class="btn" data-channel="5">5</button>
            <button id="btn6" class="btn" data-channel="6">6</button>
            <!-- <button id="btn13" class="btn">P</button> -->
        </div>
        <div id="intro">
            <p id="intro-text" class="header-text">Returning for its seventh season: <br> America's favorite festival for experimental games and playful interactions!</p>
        </div>
        <div class="ticket-container">
            <a class="ticket-btn" href="https://www.eventbrite.com/e/whaaat-festival-2024-tickets-1029544263607?aff=oddtdtcreator">
            <button id="ticket">Tickets</button>
            </a>
        </div>
    </section>

    <nav class="navbar">
        <div class="nav-container">
            <div class="nav-toggle" id="navToggle" onclick="toggleMenu()">
                &#9776;
            </div>
            <div class="active-button" id="activeButton">Top</div>
            <div class="nav-menu" id="navMenu">
                <!-- <button>Power</button> -->
                <button class="nav-btn" data-target="#top">Top</button>
                <button class="nav-btn" data-target="#info">Info</button>
                <button class="nav-btn" data-target="#speakers">Speakers</button>
                <button class="nav-btn" data-target="#schedule">Schedule</button>
                <button class="nav-btn" data-target="#arcade">Arcade</button>
                <button class="nav-btn" data-target="#tickets">Tickets</button>
                <button class="nav-btn" id="haha-btn">Haha</button>
            </div>
            
        </div>
    </nav>

    <section id="info" class="hero-section">
        <div class="hero-content">
            <h2>The Whaaat!? Gang Has Been Busy Since Last Year!</h2>
            <div class="video-container">
                <iframe width="560" height="315" src="https://www.youtube.com/embed/Vk7UanbXiT0?si=N5F1gmQ4WBbkkXoo" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
            </div>
            <div>
            <p class="descr-text">The gang has been busy, and this year's Whaaat!? Festival promises to wow attendees, befuddle critics, and cement its place as the nation's hottest festival for experimental games and playful interactions!</p>
            <p class="descr-text">You can expect old favorites (the return of the crowd-pleasing cereal bar), new faces (amazing, nationally known keynote speakers), and as always, buddling games and interactions that will make you wonder whaaat might happen next!</p>
        </div>
    </section>

    <section id="speakers" class="tv-section">
        <div class="tv-content">
            <h2>New Faces Join the Cast!</h2>
            <p id="intro-text" class="header-text">Our keynote speakers this year are really something!</p>

            <div class="container">
                <div class="round-image">
                    <img src="/speakers/josh.jpeg" alt="Round Image">
                </div>
                <div class="text">
                    <h2>Josh Zhong</h2>
                    <p>Josh Zhong is an art school veteran, most recently serving two years at NYU's Interactive Telecommunications Program where he is now a “Post-Doctoral Research Resident” despite not having a PhD. He designs questionably fun tools and experiences capitalising on the disembodiment of himself, and has never taken a single thing seriously in his life.</p>
                </div>
            </div>
            <div class="container">
                <div class="round-image">
                    <img src="/speakers/naomi.jpg" alt="Round Image">
                </div>
                <div class="text">
                    <h2>Naomi Clark</h2>
                    <p>Naomi Clark is a game designer, teacher, and scholar who has been making games since 1999. In that time, she's contributed to over three dozen titles in varied roles including game designer, writer, and producer, as well as occasionally contributing to code and graphic design. Naomi's experience ranges from games for well-known companies such as LEGO and Atari to casual and mobile games for mass audiences as well as smaller-scale independent and experimental work.</p>
                </div>
            </div>
            
        </div>
    </section>

    <section id="schedule" class="hero-section">
        <div class="hero-content">
            <h2>Episode by Episode!</h2>
            <p id="intro-text" class="header-text">Full season schedule coming soon! Stay tuned!</p>
            
        </div>
    </section>

    <section id="arcade">
        <div class="tv-content">
            <h2>Hijinks will Ensue!</h2>
        </div>
        <div class="tv-container">
            <img src="/tvimagelayers/tv2.png" alt="TV Frame" class="tv-frame">
            <video class="tv-video-2" autoplay muted loop playsinline>
                <source src="/channelvideo/staticonly.m4v" type="video/mp4">
                Your browser does not support the video tag.
            </video>
        </div>
        <div class="button-container no-padding">
            <button id="btn7" class="btn" data-channel="1">1</button>
            <button id="btn8" class="btn" data-channel="2">2</button>
            <button id="btn9" class="btn" data-channel="3">3</button>
            <button id="btn10" class="btn" data-channel="4">4</button>
            <button id="btn11" class="btn" data-channel="5">5</button>
            <button id="btn12" class="btn" data-channel="6">6</button>
        </div>
        <p id="intro-text" class="header-text games">This season, the gang races slugs, scales to new heights, campaigns for rodent gun control legislation, lives a Kafka-esque existence, and much more!</p>
    </section>

    <section id="tickets" class="hero-section">
        <div class="hero-content">
            <h2>Won't You Join Us for Season Seven?</h2>
            <div class="ticket-container">
                <a class="ticket-btn" href="https://www.eventbrite.com/e/whaaat-festival-2024-tickets-1029544263607?aff=oddtdtcreator">
                <button id="ticket">Tickets</button>
                </a>
            </div>
        </div>
    </section>

    <script>
        window.onload = function() {
        const firstTvContainer = document.querySelector('.tv-container');
        firstTvContainer.scrollIntoView({ behavior: 'smooth', block: 'center' });
        };

        let btn1 = document.querySelector('#btn1');
            btn1.addEventListener('click', ()=>{ 
                changeChannel(btn1.dataset.channel);
                if (btn1.classList.contains('active')) {
                    btn1.classList.remove('active');
                }
                else {
                btn1.classList.add('active');
                btn2.classList.remove('active');
                btn3.classList.remove('active');
                btn4.classList.remove('active');
                btn5.classList.remove('active');
                btn6.classList.remove('active');
                }
            });

            let btn2 = document.querySelector('#btn2');
            btn2.addEventListener('click', ()=>{ 
                changeChannel(btn2.dataset.channel);
                if (btn2.classList.contains('active')) {
                    btn2.classList.remove('active');
                } else {
                btn1.classList.remove('active');
                btn2.classList.add('active');
                btn3.classList.remove('active');
                btn4.classList.remove('active');
                btn5.classList.remove('active');
                btn6.classList.remove('active');
                }
            });

            let btn3 = document.querySelector('#btn3');
            btn3.addEventListener('click', ()=>{ 
                changeChannel(btn3.dataset.channel);
                if (btn3.classList.contains('active')) {
                    btn3.classList.remove('active');
                } else {
                btn1.classList.remove('active');
                btn2.classList.remove('active');
                btn3.classList.add('active');
                btn4.classList.remove('active');
                btn5.classList.remove('active');
                btn6.classList.remove('active');
                }
            });

            let btn4 = document.querySelector('#btn4');
            btn4.addEventListener('click', ()=>{ 
                changeChannel(btn4.dataset.channel);
                if (btn4.classList.contains('active')) {
                    btn4.classList.remove('active');
                } else {
                btn1.classList.remove('active');
                btn2.classList.remove('active');
                btn3.classList.remove('active');
                btn4.classList.add('active');
                btn5.classList.remove('active');
                btn6.classList.remove('active');
                }
            });

            let btn5 = document.querySelector('#btn5');
            btn5.addEventListener('click', ()=>{ 
                changeChannel(btn5.dataset.channel);
                if (btn5.classList.contains('active')) {
                    btn5.classList.remove('active');
                } else {
                btn1.classList.remove('active');
                btn2.classList.remove('active');
                btn3.classList.remove('active');
                btn4.classList.remove('active');
                btn5.classList.add('active');
                btn6.classList.remove('active');
                }
            });

            let btn6 = document.querySelector('#btn6');
            btn6.addEventListener('click', ()=>{ 
                changeChannel(btn6.dataset.channel);
                if (btn6.classList.contains('active')) {
                    btn6.classList.remove('active');
                } else {
                btn1.classList.remove('active');
                btn2.classList.remove('active');
                btn3.classList.remove('active');
                btn4.classList.remove('active');
                btn5.classList.remove('active');
                btn6.classList.add('active');
                }
            });

            function changeChannel(channel) {
                let video = document.querySelector('video');
                let oldSrc = video.src;
                let newSrc = "channelvideo/LIVINGROOM" + channel + "-sm.m4v";
                          
                if (oldSrc.includes(newSrc)) {
                    let newSrc = "channelvideo/staticonly.m4v";
                    video.setAttribute('src', newSrc);
                    video.load();
                }
                else { 
                    video.setAttribute('src', newSrc);
                    video.load();
                }
            };

            document.querySelectorAll('.nav-btn').forEach(button => {
                button.addEventListener('click', function() {
                    const target = document.querySelector(this.getAttribute('data-target'));
                    target.scrollIntoView({ behavior: 'smooth' });
                    var activeButtonDisplay = document.getElementById('activeButton');
                    if (window.innerWidth > 1100) {
                    activeButton.style.display = menu.classList.contains('show') ? 'none' : 'none';
                    }
                });
            });

            window.addEventListener('scroll', () => {
                let currentSection = '';
                document.querySelectorAll('section').forEach(section => {
                    const sectionTop = section.offsetTop;
                    if (pageYOffset >= sectionTop - 60) {
                        currentSection = section.getAttribute('id');
                    }
                });

                document.querySelectorAll('.nav-btn').forEach(button => {
                    button.classList.remove('active');
                    if (button.getAttribute('data-target') === `#${currentSection}`) {
                        button.classList.add('active');
                        setActiveButton(button);
                        if (innerWidth > 1100) {
                            activeButton.style.display = 'none';
                        }
                    }
                   
                });
            });
            
            // laugh track button

            const mp3Files = ['/laughtracks/laugh-001.mp3', '/laughtracks/laugh-002.mp3', '/laughtracks/laugh-003.mp3'];
            const playButton = document.getElementById('haha-btn');
            let audio = new Audio();

            playButton.addEventListener('click', () => {
                if (!audio.paused) {
                    audio.pause();
                    playButton.classList.remove('active');
                    return;
                }

                const randomMp3 = mp3Files[Math.floor(Math.random() * mp3Files.length)];
                audio.src = randomMp3;
                audio.play();
                playButton.classList.add('active');

                audio.onended = () => {
                    playButton.classList.remove('active');
                };
            });

            // This is the bottom tv (game videos)

            function changeGame(channel) {
                let video = document.querySelector('.tv-video-2');
                let oldSrc = video.src;
                let newSrc = "/game-gifs/game" + channel + ".mp4";        
                
                if (oldSrc.includes(newSrc)) {
                    let newSrc = "/channelvideo/staticonly.m4v";
                    video.setAttribute('src', newSrc);
                    video.load();
                }
                else { 
                    video.setAttribute('src', newSrc);
                    video.load();
                }
            };

            let btn7 = document.querySelector('#btn7');
            btn7.addEventListener('click', ()=>{ 
                changeGame(btn7.dataset.channel);
                if (btn7.classList.contains('active')) {
                    btn7.classList.remove('active');
                }
                else {
                btn7.classList.add('active');
                btn8.classList.remove('active');
                btn9.classList.remove('active');
                btn10.classList.remove('active');
                btn11.classList.remove('active');
                btn12.classList.remove('active');
                }});

                let btn8 = document.querySelector('#btn8');
                btn8.addEventListener('click', ()=>{ 
                    changeGame(btn8.dataset.channel);
                if (btn8.classList.contains('active')) {
                    btn8.classList.remove('active');
                }
                else {
                btn7.classList.remove('active');
                btn8.classList.add('active');
                btn9.classList.remove('active');
                btn10.classList.remove('active');
                btn11.classList.remove('active');
                btn12.classList.remove('active');
                }});

                
                let btn9 = document.querySelector('#btn9');
                btn9.addEventListener('click', ()=>{ 
                    changeGame(btn9.dataset.channel);
                if (btn9.classList.contains('active')) {
                    btn9.classList.remove('active');
                }
                else {
                btn7.classList.remove('active');
                btn8.classList.remove('active');
                btn9.classList.add('active');
                btn10.classList.remove('active');
                btn11.classList.remove('active');
                btn12.classList.remove('active');
                }});

                let btn10 = document.querySelector('#btn10');
                btn10.addEventListener('click', ()=>{ 
                    changeGame(btn10.dataset.channel);
                if (btn10.classList.contains('active')) {
                    btn10.classList.remove('active');
                }
                else {
                btn7.classList.remove('active');
                btn8.classList.remove('active');
                btn9.classList.remove('active');
                btn10.classList.add('active');
                btn11.classList.remove('active');
                btn12.classList.remove('active');
                }});

                let btn11 = document.querySelector('#btn11');
                btn11.addEventListener('click', ()=>{ 
                    changeGame(btn11.dataset.channel);
                if (btn11.classList.contains('active')) {
                    btn11.classList.remove('active');
                }
                else {
                btn7.classList.remove('active');
                btn8.classList.remove('active');
                btn9.classList.remove('active');
                btn10.classList.remove('active');
                btn11.classList.add('active');
                btn12.classList.remove('active');
                }});

                let btn12 = document.querySelector('#btn12');
                btn12.addEventListener('click', ()=>{ 
                    changeGame(btn12.dataset.channel);
                if (btn12.classList.contains('active')) {
                    btn12.classList.remove('active');
                }
                else {
                btn7.classList.remove('active');
                btn8.classList.remove('active');
                btn9.classList.remove('active');
                btn10.classList.remove('active');
                btn11.classList.remove('active');
                btn12.classList.add('active');
                }});

                function toggleMenu() {
                    var menu = document.getElementById('navMenu');
                    var activeButton = document.getElementById('activeButton');
                    menu.classList.toggle('show');
                    console.log(window.innerWidth);
                    
                    activeButton.style.display = menu.classList.contains('show') ? 'none' : 'block';
                    
                }

                // Function to set the active button
                function setActiveButton(button) {
                    var buttons = document.querySelectorAll('.nav-btn');
                    buttons.forEach(btn => btn.classList.remove('active'));
                    button.classList.add('active');

                    // Update the active button display
                    var activeButtonDisplay = document.getElementById('activeButton');
                    activeButtonDisplay.textContent = button.textContent;

                }

                // Collapse the menu when a button is clicked and set the active button
                document.querySelectorAll('.nav-btn').forEach(button => {
                    button.addEventListener('click', () => {
                        var menu = document.getElementById('navMenu');
                        menu.classList.remove('show');
                        setActiveButton(button);
                        document.getElementById('activeButton').style.display = 'block';
                    });
                });

                // Example usage: Set the first button as active on page load
                document.addEventListener('DOMContentLoaded', () => {
                    var firstButton = document.querySelector('.nav-btn');
                    setActiveButton(firstButton);
                });
    </script>
</body>
</html>
